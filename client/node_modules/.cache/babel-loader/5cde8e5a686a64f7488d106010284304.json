{"ast":null,"code":"//Esta función se ocupa de guardar un record\nimport records from \"./records.json\"; //importa el archivo json\n//Se ocupa de poder crear el json\n\nconst fs = require('fs'); // Almaciena el número de datos que ha de guardar\n\n\nconst numeroDePuntuacionesAGuardar = 10; //La función devuleve si ha podido entrar en la tabla de clasificación\n\n/**\n * 0: No ha entrado\n * \n * 1: El nombre esta repetido\n * \n * 2: El nombre es muy corto minimo 4 caracteres o muy largo máximo 15 cáracteres\n * \n * 3: El texto no es valido: no puede contener ni espacios ni simbolos\n * \n * 4: Se ha ingresado correctamente\n *\n */\n\nfunction guardarPuntuacion(nombreUsuario, puntos, numeroDeCompuestos) {\n  var recorsActuales = [...records]; //Almacena lo que va devolver la función\n\n  var devolucion = 0; //ordena la matriz de objetos del json\n\n  recorsActuales.sort(function (a, b) {\n    if (a.puntos > b.puntos) {\n      return -1;\n    } else if (a.puntos === b.puntos) {\n      return 0;\n    } else {\n      return +1;\n    }\n  }); //Comprueba si ha entrado en el ranking\n\n  if (recorsActuales[recorsActuales.length - 1].puntos < puntos) {\n    let objetoNuevo = {\n      nombre: nombreUsuario.trim(),\n      puntos: puntos,\n      numeroDeCompuestos: numeroDeCompuestos\n    };\n\n    if (numeroDePuntuacionesAGuardar <= recorsActuales.length) {\n      //Elimina la última del array\n      recorsActuales.pop(); //comprobar que tenga la longitud minima y máxima\n\n      if (nombreUsuario.length < 4 || nombreUsuario.length > 15) {\n        devolucion = 2;\n      } else {\n        if (recorsActuales.find(function (puntuacion) {\n          return puntuacion.nombre.toLocaleLowerCase() === nombreUsuario.toLocaleLowerCase().trim();\n        })) {\n          devolucion = 1;\n        } else {\n          recorsActuales.push(objetoNuevo);\n        }\n      }\n    } //Añade al array el nuvo elemento\n\n\n    console.log(recorsActuales);\n    return 1;\n  }\n\n  return 0;\n  console.log(recorsActuales);\n}\n\nexport default guardarPuntuacion;","map":{"version":3,"sources":["/home/javi/Programacion/Web/Formulacion/src/guardarRecords.js"],"names":["records","fs","require","numeroDePuntuacionesAGuardar","guardarPuntuacion","nombreUsuario","puntos","numeroDeCompuestos","recorsActuales","devolucion","sort","a","b","length","objetoNuevo","nombre","trim","pop","find","puntuacion","toLocaleLowerCase","push","console","log"],"mappings":"AAAA;AACA,OAAOA,OAAP,MAAoB,gBAApB,C,CACA;AACA;;AAEA,MAAMC,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB,C,CAEA;;;AAEA,MAAMC,4BAA4B,GAAG,EAArC,C,CAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,iBAAT,CAA2BC,aAA3B,EAA0CC,MAA1C,EAAkDC,kBAAlD,EAAsE;AAElE,MAAIC,cAAc,GAAG,CAAC,GAAGR,OAAJ,CAArB,CAFkE,CAIlE;;AACA,MAAIS,UAAU,GAAG,CAAjB,CALkE,CAOlE;;AAEAD,EAAAA,cAAc,CAACE,IAAf,CAAoB,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChC,QAAID,CAAC,CAACL,MAAF,GAAWM,CAAC,CAACN,MAAjB,EAAyB;AAErB,aAAO,CAAC,CAAR;AACH,KAHD,MAGO,IAAIK,CAAC,CAACL,MAAF,KAAaM,CAAC,CAACN,MAAnB,EAA2B;AAC9B,aAAO,CAAP;AACH,KAFM,MAEA;AACH,aAAO,CAAC,CAAR;AACH;AACJ,GATD,EATkE,CAoBlE;;AAEA,MAAIE,cAAc,CAACA,cAAc,CAACK,MAAf,GAAwB,CAAzB,CAAd,CAA0CP,MAA1C,GAAmDA,MAAvD,EAA+D;AAC3D,QAAIQ,WAAW,GAAG;AACdC,MAAAA,MAAM,EAAEV,aAAa,CAACW,IAAd,EADM;AAGdV,MAAAA,MAAM,EAAEA,MAHM;AAKdC,MAAAA,kBAAkB,EAAEA;AALN,KAAlB;;AAQA,QAAIJ,4BAA4B,IAAIK,cAAc,CAACK,MAAnD,EAA2D;AACvD;AACAL,MAAAA,cAAc,CAACS,GAAf,GAFuD,CAKvD;;AACA,UAAIZ,aAAa,CAACQ,MAAd,GAAuB,CAAvB,IAA4BR,aAAa,CAACQ,MAAd,GAAuB,EAAvD,EAA2D;AACvDJ,QAAAA,UAAU,GAAG,CAAb;AACH,OAFD,MAGK;AAED,YAAID,cAAc,CAACU,IAAf,CAAoB,UAAUC,UAAV,EAAsB;AAE1C,iBAAOA,UAAU,CAACJ,MAAX,CAAkBK,iBAAlB,OAA0Cf,aAAa,CAACe,iBAAd,GAAkCJ,IAAlC,EAAjD;AAEH,SAJG,CAAJ,EAII;AAEAP,UAAAA,UAAU,GAAG,CAAb;AACH,SAPD,MAQK;AACDD,UAAAA,cAAc,CAACa,IAAf,CAAoBP,WAApB;AAEH;AAEJ;AAIJ,KArC0D,CAuC3D;;;AAGAQ,IAAAA,OAAO,CAACC,GAAR,CAAYf,cAAZ;AAGA,WAAO,CAAP;AAEH;;AAED,SAAO,CAAP;AAIAc,EAAAA,OAAO,CAACC,GAAR,CAAYf,cAAZ;AAEH;;AAID,eAAeJ,iBAAf","sourcesContent":["//Esta función se ocupa de guardar un record\nimport records from \"./records.json\";\n//importa el archivo json\n//Se ocupa de poder crear el json\n\nconst fs = require('fs');\n\n// Almaciena el número de datos que ha de guardar\n\nconst numeroDePuntuacionesAGuardar = 10;\n\n//La función devuleve si ha podido entrar en la tabla de clasificación\n/**\n * 0: No ha entrado\n * \n * 1: El nombre esta repetido\n * \n * 2: El nombre es muy corto minimo 4 caracteres o muy largo máximo 15 cáracteres\n * \n * 3: El texto no es valido: no puede contener ni espacios ni simbolos\n * \n * 4: Se ha ingresado correctamente\n *\n */\n\nfunction guardarPuntuacion(nombreUsuario, puntos, numeroDeCompuestos) {\n\n    var recorsActuales = [...records];\n\n    //Almacena lo que va devolver la función\n    var devolucion = 0;\n\n    //ordena la matriz de objetos del json\n\n    recorsActuales.sort(function (a, b) {\n        if (a.puntos > b.puntos) {\n\n            return -1;\n        } else if (a.puntos === b.puntos) {\n            return 0;\n        } else {\n            return +1;\n        }\n    })\n\n    //Comprueba si ha entrado en el ranking\n\n    if (recorsActuales[recorsActuales.length - 1].puntos < puntos) {\n        let objetoNuevo = {\n            nombre: nombreUsuario.trim(),\n\n            puntos: puntos,\n\n            numeroDeCompuestos: numeroDeCompuestos\n        }\n\n        if (numeroDePuntuacionesAGuardar <= recorsActuales.length) {\n            //Elimina la última del array\n            recorsActuales.pop();\n\n\n            //comprobar que tenga la longitud minima y máxima\n            if (nombreUsuario.length < 4 || nombreUsuario.length > 15) {\n                devolucion = 2\n            }\n            else {\n\n                if (recorsActuales.find(function (puntuacion) {\n\n                    return puntuacion.nombre.toLocaleLowerCase() === nombreUsuario.toLocaleLowerCase().trim();\n\n                })) {\n\n                    devolucion = 1;\n                }\n                else {\n                    recorsActuales.push(objetoNuevo);\n\n                }\n\n            }\n\n\n\n        }\n\n        //Añade al array el nuvo elemento\n\n\n        console.log(recorsActuales);\n\n\n        return 1;\n\n    }\n\n    return 0;\n\n\n\n    console.log(recorsActuales)\n\n}\n\n\n\nexport default guardarPuntuacion;\n\n"]},"metadata":{},"sourceType":"module"}