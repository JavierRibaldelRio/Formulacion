{"ast":null,"code":"import _toConsumableArray from\"/home/javi/Programacion/Web/Formulacion/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/home/javi/Programacion/Web/Formulacion/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/javi/Programacion/Web/Formulacion/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/javi/Programacion/Web/Formulacion/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/javi/Programacion/Web/Formulacion/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import'./App.css';//Importa la hoja de estilo App\nimport'./main.css';import'./notificacion.css';import'./tipografias.css';import'./elementos.css';import ListaCompuestos from'./ListaCompuestoCreados';import Marcador from'./Marcador';import Validacion from'./Validar';import ElementoReact from'./ElementoReact';import NotificacicionUsuario from'./notificacion';import PilaRobar from'./PilaDeRobar';//Variables a Importar\nimport{tiempoNotificacionSegundos}from'./palabrasClaves';import TablaRecords from'./TablaRecords';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var React=require('react');//Activa REACt\nvar App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);//Define las propiedades\n_this.state={arrayObjeto:_toConsumableArray(window.$cartasDisponibles),puntosTotales:0,notficacion:undefined,buenaNotificacion:true,juegoAcabado:false,juegoEnMarcha:false,textoBotonControl:\"Empezar\",compuestosCreados:[],api:undefined,todosLosRecords:undefined,//Almacena todos los records que han sido desacargados desde la api\nnombreUsuario:undefined,//Almacena el nnomvbre del usuario\nmejorRecord:undefined,//Almacena el mejor record\npuntuacionGuardada:false//Almacena si la puntuación ha sido guardada\n};return _this;}//Actualiza el estado y suma los puntos\n_createClass(App,[{key:\"actualizarEstado\",value:function actualizarEstado(a,nuevoCompuestoCreado){this.setState({arrayObjeto:_toConsumableArray(window.$cartasDisponibles),puntosTotales:Number(a+this.state.puntosTotales),compuestosCreados:this.state.compuestosCreados.concat(nuevoCompuestoCreado)});}//Función que añade el elemento robado a la clase\n},{key:\"anyadirCartaRobado\",value:function anyadirCartaRobado(elementoRobado){//Se utiliza concat en vez de push porqur push no se puede usar en react\nthis.setState({arrayObjeto:this.state.arrayObjeto.concat(elementoRobado)});}//Devolver las cartas disponiles al estado original\n},{key:\"devolverAlEstadoOriginal\",value:function devolverAlEstadoOriginal(){//Devolver las cartas disponiles al estado original\nthis.setState({arrayObjeto:_toConsumableArray(window.$cartasDisponibles)});}//roba una carta\n},{key:\"robarCarta\",value:function robarCarta(cartaARobar){//Elimina la 1ª casilla del array baraja\nwindow.$baraja.splice(0,1);this.setState({arrayObjeto:_toConsumableArray(window.$cartasDisponibles).concat(window.$baraja[0])});//Dice que carta robar usada es igual a falso\nwindow.$cartaRobarUsada=false;//Definimos cual es la carta robada\nwindow.$cartaRobada=window.$baraja[0];//Devolvemos baraja [0]\nreturn window.$baraja[0];}//Edita el estado conforme el imput y lo devuelve a configuración origianl\n},{key:\"notificar\",value:function notificar(nuevaNotificacion,bien){//Añade al estado la notificación y si es buena o mal\nthis.setState({notficacion:nuevaNotificacion,buenaNotificacion:bien});//Pone un ocntador hacía atras\nsetTimeout(function(){//Revierte el estado poniendolo en configuración original\nthis.setState({notficacion:undefined,buenaNotificacion:true});}.bind(this),tiempoNotificacionSegundos*1000);//El numero es el tiempo en milisegundos, por eso multiplico por mil\n}//Cambia el esta haviendo que el juego se acabe\n},{key:\"terminar\",value:function terminar(){//Hace que juego acabado sea igual a verdadero\nthis.setState({juegoAcabado:true});}//Pausa o despausa el texto\n},{key:\"pausarOContinuar\",value:function pausarOContinuar(){var nuevoTexto;//Texto que va a contener el texto\n//Comprueba si juego esta en marcha\nif(this.state.juegoEnMarcha===true){//Asigna el nuevo texto\nnuevoTexto=\"Reanudar\";}else{nuevoTexto=\"Pausar\";}//Invierte el valor de \nthis.setState({juegoEnMarcha:!this.state.juegoEnMarcha,textoBotonControl:nuevoTexto});}//Pide los records\n},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;//API\nfetch(\"/fetchrecords\").then(function(response){return response.json();}).then(function(data){_this2.setState({todosLosRecords:data,mejorRecord:data[0].puntos});});}//Se ejecuta al enviar el formulario\n},{key:\"enviarFormulario\",value:function enviarFormulario(e){var _this3=this;e.preventDefault();var nickNuevoRecord=this.state.nombreUsuario;if(comprobarSiCoinciden(this.state.todosLosRecords)===true){this.notificar(\"Este nombre ya esta en uso\",false);}else if(this.state.puntuacionGuardada===false){var puntos=this.state.puntosTotales;var nombre=this.state.nombreUsuario;var compuestos=this.state.compuestosCreados.length;var url=\"/comprobar/?nick=\".concat(nombre,\"&puntos=\").concat(puntos,\"&compuestos=\").concat(compuestos);fetch(url).then(function(response){return response.json();}).then(function(data){_this3.setState({todosLosRecords:data});if(data===undefined){alert(\"Se ha producido un error, por favor refresque la página\");}});this.notificar(\"Has entrado en el ranking.\",true);//Se asegura de que\nthis.setState({puntuacionGuardada:true});}//Comprueba que los nombres no coinciden\nfunction comprobarSiCoinciden(arr){for(var i=0;i<arr.length;i++){if(nickNuevoRecord===arr[i].nick){return true;}}}}//Lo que devolvera el componente APP\n},{key:\"render\",value:function render(){var _this4=this;//Sí el juego ha acabdo\nif(this.state.juegoAcabado===true){var aMostrar=undefined;//almacena si ha habiado un nuevo record\nvar mostrarTabla=/*#__PURE__*/_jsx(\"p\",{className:\"Mensaje_Error\",children:\"Se a producido un error, por favor refresque la p\\xE1gina\"});//Alamacenará la tabla en caso de que se muestre\nvar h1CompuestosCreados=/*#__PURE__*/_jsx(\"h1\",{children:\"Lista de Compuestos Generados\"});//Si se han creado 0 compuestos\nif(this.state.compuestosCreados.length===0){h1CompuestosCreados=undefined;//Lo hace indefinido\n}//Se ocupa de ver si entra en el podium\n//Comprueba que se han obtenido los datos en forma de arrya\nif(this.state.todosLosRecords!==undefined){//renderiza la opción  de guardar nombre\nif(this.state.puntosTotales>this.state.todosLosRecords[this.state.todosLosRecords.length-1].puntos){aMostrar=/*#__PURE__*/_jsxs(\"form\",{id:\"Formulario_Record\",onSubmit:this.enviarFormulario.bind(this),children:[\"Inserte su nombre para guardar su puntuaci\\xF3n:\",/*#__PURE__*/_jsx(\"input\",{type:\"name\",pattern:\"[A-Za-z0-9_-]{4,10}\",title:\"Solo letras y n\\xFAmeros\",minLength:\"4\",maxLength:\"10\",placeholder:\"SuNombre\",disabled:this.state.puntuacionGuardada,onChange:function onChange(e){_this4.setState({nombreUsuario:e.target.value.trim()});},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"Boton_Normal\",type:\"submit\",disabled:this.state.puntuacionGuardada,children:\"Guardar Puntuaci\\xF3n\"}),/*#__PURE__*/_jsx(\"br\",{})]});}//Añade la tabla ha la renderización\nmostrarTabla=/*#__PURE__*/_jsx(TablaRecords,{records:this.state.todosLosRecords});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"Fin_Juego_Div\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"Fin_Juego\",children:[\"EL JUEGO SE HA ACABADO, HAS OBTENIDO UN TOTAL DE \",this.state.puntosTotales,\" PUNTOS, Y FORMULADO \",this.state.compuestosCreados.length,\" COMPUESTOS. \"]}),/*#__PURE__*/_jsx(\"br\",{}),h1CompuestosCreados,/*#__PURE__*/_jsx(ListaCompuestos,{id:\"Lista_Compuestos\",lista:this.state.compuestosCreados}),//Muestra lo que se a de mostrar\naMostrar,/*#__PURE__*/_jsx(NotificacicionUsuario,{id:\"Notificacion_Final\",texto:this.state.notficacion,tipo:this.state.buenaNotificacion}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h1\",{children:\"Ranking\"}),mostrarTabla,/*#__PURE__*/_jsx(\"form\",{className:\"Panel_Control\",children:/*#__PURE__*/_jsx(\"button\",{className:\"Boton_Play_Pause Boton_Normal\",children:\"Volver a Jugar\"})})]})});}else{//Almacena la ID de el boton lo cual hace que que cambie le tamaño del botón\nvar idBoton,botonAcabar;// Almacena el \nif(this.state.textoBotonControl===\"Empezar\"){idBoton=\"Empezar\";//Almacena lo que pondrá\nbotonAcabar=/*#__PURE__*/_jsx(\"p\",{});}else{idBoton=\"Boton_de_Control\";//Almacena el botón que creará cuando se este jugando\nbotonAcabar=/*#__PURE__*/_jsx(\"button\",{id:idBoton,onClick:this.terminar.bind(this),className:\"Boton_Normal Boton_Play_Pause\",children:\"Terminar\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{\"aria-disabled\":\"true\",className:\"Panel_Control\",children:[/*#__PURE__*/_jsx(Validacion,{jugando:this.state.juegoEnMarcha,funcionAlPulsar:this.actualizarEstado.bind(this),funcionNotificar:this.notificar.bind(this),elementosDisponibles:this.state.arrayObjeto}),/*#__PURE__*/_jsx(\"table\",{className:\"Tabla_Marca\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Marcador,{texto:\"Puntos\",acabar:this.terminar.bind(this),puntuacion:this.state.puntosTotales})})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Marcador,{texto:\"Compuestos Creados\",puntuacion:this.state.compuestosCreados.length})})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Marcador,{texto:\"Record\",puntuacion:this.state.mejorRecord})})})]})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"Notificacion_Compuesto\",children:/*#__PURE__*/_jsx(NotificacicionUsuario,{texto:this.state.notficacion,tipo:this.state.buenaNotificacion})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"table\",{className:\"banca\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"filaElementos\",children:[/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[0]}),/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[2]}),/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[4]}),/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[6]})]})}),/*#__PURE__*/_jsx(\"td\",{width:\"30%\",className:\"banca\",colSpan:\"2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"banca\",children:/*#__PURE__*/_jsx(PilaRobar,{jugando:this.state.juegoEnMarcha,terminarJuego:this.terminar.bind(this),robarUnaCarta:this.robarCarta.bind(this),restaurar:this.devolverAlEstadoOriginal.bind(this),anyadirAlEstadoCartaRobada:this.anyadirCartaRobado.bind(this)})})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"filaElementos\",children:[/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[1]}),/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[3]}),/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[5]}),/*#__PURE__*/_jsx(ElementoReact,{objeto:this.state.arrayObjeto[7]})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"Panel_Control\",children:[/*#__PURE__*/_jsx(\"button\",{id:idBoton,className:\"Boton_Normal Boton_Play_Pause\",onClick:this.pausarOContinuar.bind(this),children:this.state.textoBotonControl}),/*#__PURE__*/_jsx(\"br\",{}),botonAcabar,/*#__PURE__*/_jsx(\"a\",{class:\"Boton_Normal Boton_Play_Pause\",href:\"/\",children:\"Empezar a Jugar\"})]})]})]})})]});}}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/home/javi/Programacion/Web/Formulacion/client/src/App.js"],"names":["ListaCompuestos","Marcador","Validacion","ElementoReact","NotificacicionUsuario","PilaRobar","tiempoNotificacionSegundos","TablaRecords","React","require","App","props","state","arrayObjeto","window","$cartasDisponibles","puntosTotales","notficacion","undefined","buenaNotificacion","juegoAcabado","juegoEnMarcha","textoBotonControl","compuestosCreados","api","todosLosRecords","nombreUsuario","mejorRecord","puntuacionGuardada","a","nuevoCompuestoCreado","setState","Number","concat","elementoRobado","cartaARobar","$baraja","splice","$cartaRobarUsada","$cartaRobada","nuevaNotificacion","bien","setTimeout","bind","nuevoTexto","fetch","then","response","json","data","puntos","e","preventDefault","nickNuevoRecord","comprobarSiCoinciden","notificar","nombre","compuestos","length","url","alert","arr","i","nick","aMostrar","mostrarTabla","h1CompuestosCreados","enviarFormulario","target","value","trim","idBoton","botonAcabar","terminar","actualizarEstado","robarCarta","devolverAlEstadoOriginal","anyadirCartaRobado","pausarOContinuar","Component"],"mappings":"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","sourcesContent":["import './App.css';       //Importa la hoja de estilo App\nimport './main.css';\nimport './notificacion.css';\nimport './tipografias.css';\nimport './elementos.css';\n\nimport ListaCompuestos from './ListaCompuestoCreados';\nimport Marcador from './Marcador';\nimport Validacion from './Validar';\nimport ElementoReact from './ElementoReact';\nimport NotificacicionUsuario from './notificacion';\nimport PilaRobar from './PilaDeRobar';\n\n//Variables a Importar\n\n\nimport { tiempoNotificacionSegundos } from './palabrasClaves';\nimport TablaRecords from './TablaRecords';\n\n\n\nvar React = require('react');   //Activa REACt\n\nclass App extends React.Component {\n  constructor(props) {\n\n    super(props);\n\n    //Define las propiedades\n    this.state = {\n      arrayObjeto: [...window.$cartasDisponibles], puntosTotales: 0,\n      notficacion: undefined, buenaNotificacion: true, juegoAcabado: false,\n      juegoEnMarcha: false, textoBotonControl: \"Empezar\", compuestosCreados: [],\n      api: undefined,\n\n      todosLosRecords: undefined,   //Almacena todos los records que han sido desacargados desde la api\n\n      nombreUsuario: undefined,       //Almacena el nnomvbre del usuario\n\n      mejorRecord: undefined,     //Almacena el mejor record\n\n      puntuacionGuardada: false     //Almacena si la puntuación ha sido guardada\n    }\n\n  }\n\n  //Actualiza el estado y suma los puntos\n  actualizarEstado(a, nuevoCompuestoCreado) {\n\n    this.setState({\n      arrayObjeto: [...window.$cartasDisponibles],\n      puntosTotales: Number(a + this.state.puntosTotales),\n      compuestosCreados: this.state.compuestosCreados.concat(nuevoCompuestoCreado)\n    });\n\n  }\n\n  //Función que añade el elemento robado a la clase\n  anyadirCartaRobado(elementoRobado) {\n\n    //Se utiliza concat en vez de push porqur push no se puede usar en react\n    this.setState({ arrayObjeto: this.state.arrayObjeto.concat(elementoRobado) });\n\n  }\n\n  //Devolver las cartas disponiles al estado original\n\n  devolverAlEstadoOriginal() {\n\n    //Devolver las cartas disponiles al estado original\n    this.setState({ arrayObjeto: [...window.$cartasDisponibles] });\n\n  }\n\n  //roba una carta\n  robarCarta(cartaARobar) {\n\n\n    //Elimina la 1ª casilla del array baraja\n    window.$baraja.splice(0, 1);\n\n    this.setState({ arrayObjeto: [...window.$cartasDisponibles].concat(window.$baraja[0]) });\n\n    //Dice que carta robar usada es igual a falso\n    window.$cartaRobarUsada = false;\n\n    //Definimos cual es la carta robada\n\n    window.$cartaRobada = window.$baraja[0]\n\n    //Devolvemos baraja [0]\n    return window.$baraja[0];\n  }\n\n  //Edita el estado conforme el imput y lo devuelve a configuración origianl\n  notificar(nuevaNotificacion, bien) {\n\n    //Añade al estado la notificación y si es buena o mal\n    this.setState({ notficacion: nuevaNotificacion, buenaNotificacion: bien });\n\n\n    //Pone un ocntador hacía atras\n    setTimeout(function () {\n\n      //Revierte el estado poniendolo en configuración original\n      this.setState({ notficacion: undefined, buenaNotificacion: true });\n\n    }.bind(this), tiempoNotificacionSegundos * 1000);    //El numero es el tiempo en milisegundos, por eso multiplico por mil\n\n\n  }\n\n  //Cambia el esta haviendo que el juego se acabe\n  terminar() {\n\n    //Hace que juego acabado sea igual a verdadero\n    this.setState({ juegoAcabado: true })\n  }\n\n  //Pausa o despausa el texto\n  pausarOContinuar() {\n\n    var nuevoTexto; //Texto que va a contener el texto\n\n    //Comprueba si juego esta en marcha\n    if (this.state.juegoEnMarcha === true) {\n\n      //Asigna el nuevo texto\n      nuevoTexto = \"Reanudar\";\n\n    } else {\n      nuevoTexto = \"Pausar\";\n    }\n\n    //Invierte el valor de \n    this.setState({ juegoEnMarcha: !this.state.juegoEnMarcha, textoBotonControl: nuevoTexto })\n\n  }\n\n  //Pide los records\n  componentDidMount() {\n    //API\n\n\n    fetch(\"/fetchrecords\").then(response => response.json()).then((data) => { this.setState({ todosLosRecords: data, mejorRecord: data[0].puntos }); });\n\n\n  }\n\n  //Se ejecuta al enviar el formulario\n  enviarFormulario(e) {\n    e.preventDefault();\n\n    let nickNuevoRecord = this.state.nombreUsuario;\n\n    if (comprobarSiCoinciden(this.state.todosLosRecords) === true) {\n\n      this.notificar(\"Este nombre ya esta en uso\", false);\n    } else if (this.state.puntuacionGuardada === false) {\n\n      var puntos = this.state.puntosTotales;\n\n      var nombre = this.state.nombreUsuario;\n\n      let compuestos = this.state.compuestosCreados.length;\n\n      var url = `/comprobar/?nick=${nombre}&puntos=${puntos}&compuestos=${compuestos}`;\n\n      fetch(url).then(response => response.json()).then((data) => {\n        this.setState({ todosLosRecords: data }); if (data === undefined) {\n          alert(\"Se ha producido un error, por favor refresque la página\")\n        }\n      });\n\n      this.notificar(\"Has entrado en el ranking.\", true);\n\n      //Se asegura de que\n\n      this.setState({ puntuacionGuardada: true })\n\n\n    }\n\n    //Comprueba que los nombres no coinciden\n\n\n    function comprobarSiCoinciden(arr) {\n      for (var i = 0; i < arr.length; i++) {\n\n        if (nickNuevoRecord === arr[i].nick) {\n\n          return true;\n\n\n        }\n\n      }\n    }\n  }\n\n  //Lo que devolvera el componente APP\n  render() {\n    //Sí el juego ha acabdo\n    if (this.state.juegoAcabado === true) {\n\n      var aMostrar = undefined;    //almacena si ha habiado un nuevo record\n\n      var mostrarTabla = <p className=\"Mensaje_Error\">Se a producido un error, por favor refresque la página</p>;  //Alamacenará la tabla en caso de que se muestre\n\n      var h1CompuestosCreados = <h1>Lista de Compuestos Generados</h1>;\n\n      //Si se han creado 0 compuestos\n      if (this.state.compuestosCreados.length === 0) {\n\n        h1CompuestosCreados = undefined;  //Lo hace indefinido\n\n      }\n\n      //Se ocupa de ver si entra en el podium\n\n      //Comprueba que se han obtenido los datos en forma de arrya\n      if (this.state.todosLosRecords !== undefined) {\n\n        //renderiza la opción  de guardar nombre\n        if (this.state.puntosTotales > this.state.todosLosRecords[this.state.todosLosRecords.length - 1].puntos) {\n\n          aMostrar =\n            <form id=\"Formulario_Record\" onSubmit={this.enviarFormulario.bind(this)}>\n              Inserte su nombre para guardar su puntuación:\n\n              <input type=\"name\" pattern=\"[A-Za-z0-9_-]{4,10}\" title=\"Solo letras y números\" minLength=\"4\" maxLength=\"10\" placeholder=\"SuNombre\" disabled={this.state.puntuacionGuardada} onChange={(e) => { this.setState({ nombreUsuario: e.target.value.trim() }); }} required></input>\n\n              <br></br>\n\n              <hr></hr>\n\n              <button className=\"Boton_Normal\" type=\"submit\" disabled={this.state.puntuacionGuardada}>Guardar Puntuación</button>\n\n              <br />\n\n\n            </form>;\n\n        }\n\n        //Añade la tabla ha la renderización\n\n        mostrarTabla = <TablaRecords records={this.state.todosLosRecords} />;\n\n      }\n\n\n\n      return (\n\n        <div>\n          <div className=\"Fin_Juego_Div\"  >\n            <p className=\"Fin_Juego\">EL JUEGO SE HA ACABADO, HAS OBTENIDO UN TOTAL DE {this.state.puntosTotales} PUNTOS, Y FORMULADO {this.state.compuestosCreados.length} COMPUESTOS. </p>\n            <br></br>\n\n            {h1CompuestosCreados}\n\n\n            <ListaCompuestos id=\"Lista_Compuestos\" lista={this.state.compuestosCreados}></ListaCompuestos>\n\n\n\n            { //Muestra lo que se a de mostrar\n              aMostrar}\n\n            <NotificacicionUsuario id=\"Notificacion_Final\" texto={this.state.notficacion} tipo={this.state.buenaNotificacion} />\n\n            <hr />\n\n\n            <h1>Ranking</h1>\n\n            {mostrarTabla}\n\n            <form className=\"Panel_Control\">\n\n              <button className=\"Boton_Play_Pause Boton_Normal\">Volver a Jugar</button>\n\n            </form>\n          </div>\n\n\n        </div>\n\n      )\n\n    } else {\n      //Almacena la ID de el boton lo cual hace que que cambie le tamaño del botón\n      var idBoton, botonAcabar;    // Almacena el \n      if (this.state.textoBotonControl === \"Empezar\") {\n        idBoton = \"Empezar\";\n\n        //Almacena lo que pondrá\n        botonAcabar = <p></p>;\n      }\n\n      else {\n        idBoton = \"Boton_de_Control\";\n        //Almacena el botón que creará cuando se este jugando\n        botonAcabar = <button id={idBoton} onClick={this.terminar.bind(this)} className=\"Boton_Normal Boton_Play_Pause\">Terminar</button>\n\n      }\n\n\n      return (\n\n        <div>\n\n          <div aria-disabled=\"true\" className=\"Panel_Control\">\n\n            <Validacion jugando={this.state.juegoEnMarcha} funcionAlPulsar={this.actualizarEstado.bind(this)} funcionNotificar={this.notificar.bind(this)} elementosDisponibles={this.state.arrayObjeto}></Validacion>\n            <table className=\"Tabla_Marca\">\n              <tbody>\n                <tr>\n                  <td>\n                    <Marcador texto=\"Puntos\" acabar={this.terminar.bind(this)} puntuacion={this.state.puntosTotales}></Marcador>\n                  </td>\n\n\n                </tr>\n                <tr>\n                  <td>\n                    <Marcador texto=\"Compuestos Creados\" puntuacion={this.state.compuestosCreados.length} />\n                  </td>\n\n                </tr>\n\n                <tr>\n                  <td>\n                    <Marcador texto=\"Record\" puntuacion={this.state.mejorRecord} />\n                  </td>\n\n                </tr>\n              </tbody>\n\n            </table>\n\n          </div>\n\n          <div id=\"Notificacion_Compuesto\">\n\n            <NotificacicionUsuario texto={this.state.notficacion} tipo={this.state.buenaNotificacion} ></NotificacicionUsuario>\n          </div>\n\n          <br /><br />\n          <table className=\"banca\">\n\n            <tbody>\n              <tr>\n                <td>\n                  <div className=\"filaElementos\">\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[0]}\n                    ></ElementoReact>\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[2]}\n                    ></ElementoReact>\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[4]}\n                    ></ElementoReact>\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[6]}\n                    ></ElementoReact>\n\n                  </div>\n\n                </td>\n                <td width=\"30%\" className=\"banca\" colSpan=\"2\">\n\n                  <div className=\"banca\">\n\n                    <PilaRobar jugando={this.state.juegoEnMarcha} terminarJuego={this.terminar.bind(this)} robarUnaCarta={this.robarCarta.bind(this)} restaurar={this.devolverAlEstadoOriginal.bind(this)} anyadirAlEstadoCartaRobada={this.anyadirCartaRobado.bind(this)}  ></PilaRobar>\n\n                  </div>\n                </td>\n              </tr>\n\n              <tr>\n\n                <td>\n                  <div className=\"filaElementos\">\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[1]}\n                    ></ElementoReact>\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[3]}\n                    ></ElementoReact>\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[5]}\n                    ></ElementoReact>\n\n                    <ElementoReact\n                      objeto={this.state.arrayObjeto[7]}\n                    ></ElementoReact>\n\n                  </div>\n\n                </td>\n                {/* Botón de empezar o pausar */}\n                <td className=\"Panel_Control\">\n\n                  <button id={idBoton} className=\"Boton_Normal Boton_Play_Pause\" onClick={this.pausarOContinuar.bind(this)}>{this.state.textoBotonControl}</button>\n\n                  <br></br>\n\n                  {botonAcabar}\n\n                  <a class=\"Boton_Normal Boton_Play_Pause\" href=\"/\">Empezar a Jugar</a>\n                </td>\n\n              </tr>\n\n\n            </tbody>\n          </table>\n        </div>\n      )\n    }\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}